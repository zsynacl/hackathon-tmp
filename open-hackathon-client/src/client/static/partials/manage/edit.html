<div class="manage-edit">
  <uib-tabset class="m-tabs">
    <uib-tab heading="{{'EDIT_ACTIVITY_TABS.INFORMATION' | translate}}">
      <div class="center">
        <div class="col-lg-5 col-md-7 col-xs-10 center">
          <form name="activitForm" class="form-horizontal" ng-submit="updateBasicInformation()" novalidate>
            <fieldset>
              <div class="form-group">
                <label class="col-xs-2 control-label" translate="ACTIVITY_FIELDS.NAME">NAME</label>
                <div class="col-xs-10">
                  <p class="form-control-static">{{modules.name}}</p>
                </div>
              </div>
              <div class="form-group" ng-class="{'has-error': activitForm.display_name.$touched && activitForm.display_name.$invalid,'has-success':activitForm.display_name.$valid}">
                <label for="inputPassword" class="col-xs-2 control-label" translate="ACTIVITY_FIELDS.DISPLAY_NAME">DISPLAY_NAME</label>
                <div class="col-xs-10 required">
                  <input type="text" class="form-control" name="display_name" placeholder="{{'ACTIVITY_FIELDS.DISPLAY_NAME' | translate}}" ng-model="modules.display_name" ng-trim="true" ng-maxlength="8" required>
                  <div class="messages" ng-messages="activitForm.display_name.$error" ng-if="activitForm.display_name.$touched && activitForm.display_name.$invalid">
                    <span ng-message="maxlength"><i class="fa fa-close" uib-tooltip="" tooltip-placement="right auto" ></i></span>
                    <span ng-message="required"><i class="fa fa-close" uib-tooltip="" tooltip-placement="right auto"></i></span>
                  </div>
                  <div class="messages" ng-if="activitForm.display_name.$touched && activitForm.display_name.$valid">
                    <i class="fa fa-check"></i>
                  </div>
                </div>
              </div>
              <div class="form-group" ng-class="{'has-error': activitForm.tags.$touched && activitForm.tags.$invalid,'has-success':activitForm.tags.$touched && activitForm.tags.$valid}">
                <label for="inputPassword" class="col-xs-2 control-label" translate="ACTIVITY_FIELDS.TAGS">TAGS</label>
                <div class="col-xs-10 control-addon">
                  <tags-input ng-model="tags" name="tags" placeholder="{{ 'ACTIVITY_FIELDS.TAGS' | translate}}" min-length="2">
                    <i class="control-icon fa fa-tag"></i>
                  </tags-input>
                  <div class="messages" ng-if="activitForm.tags.$touched && activitForm.tags.$valid">
                    <i class="fa fa-check"></i>
                  </div>
                </div>
              </div>
              <div class="form-group" ng-class="{'has-success':activitForm.location.$touched && activitForm.location.$valid}">
                <label for="inputPassword" class="col-xs-2 control-label" translate="ACTIVITY_FIELDS.LOCATION">LOCATION</label>
                <div class="col-xs-10 control-addon">
                  <input type="text" class="form-control" name="location" placeholder="{{'PLACEHOLDERS.LOCATION' | translate}}" ng-model="modules.location">
                  <i class="control-icon fa fa-map-marker"></i>
                  <div class="messages" ng-if="activitForm.location.$touched && activitForm.location.$valid">
                    <i class="fa fa-check"></i>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="inputPassword" class="col-xs-2 control-label" translate="ACTIVITY_FIELDS.EVENT_TIME">EVENT_TIME</label>
                <div class="col-xs-5 control-addon required" ng-class="{'has-error': activitForm.event_start_time.$touched && activitForm.event_start_time.$invalid,'has-success':activitForm.event_start_time.$touched && activitForm.event_start_time.$valid}">
                  <input type="text" class="form-control" name="event_start_time" placeholder="{{'PLACEHOLDERS.START_TIME' | translate}}" ng-model="modules.event_start_time" ng-max="modules.event_end_time" max-date="modules.event_end_time" ng-focus="open.event_start_time = true" ng-click="open.event_start_time = true" is-open="open.event_start_time" datetime-local="yyyy/MM/dd HH:mm" datetime-picker="yyyy/MM/dd HH:mm" timepicker-options="{'show-meridian':true}" required>
                  <i class="control-icon fa fa-calendar"></i>
                  <div class="messages" ng-messages="activitForm.event_start_time.$error" ng-if="activitForm.event_start_time.$touched && activitForm.event_start_time.$invalid">
                    <span ng-message="datetime"><i class="fa fa-close" uib-tooltip="{{'VALIDATE.EVENT_START_TIME_REQUIRED' | translate}}" tooltip-placement="right auto" ></i></span>
                    <span ng-message="max"><i class="fa fa-close" uib-tooltip="{{ 'VALIDATE.EVENT_START_TIME_MAX' | translate}}" tooltip-placement="right auto" ></i></span>
                    <span ng-message="required"><i class="fa fa-close" uib-tooltip="{{ 'VALIDATE.EVENT_START_TIME_REQUIRED' | translate}}" tooltip-placement="right auto"></i></span>
                  </div>
                  <div class="messages" ng-if="activitForm.event_start_time.$touched && activitForm.event_start_time.$valid">
                    <i class="fa fa-check"></i>
                  </div>
                </div>
                <div class="col-xs-5 control-addon" ng-class="{'has-error': activitForm.event_end_time.$touched && activitForm.event_end_time.$invalid,'has-success':activitForm.event_end_time.$touched && activitForm.event_end_time.$valid}">
                  <input type="text" class="form-control" name="event_end_time" placeholder="{{'PLACEHOLDERS.END_TIME' | translate}}" ng-model="modules.event_end_time" ng-min="modules.event_start_time" min-date="modules.event_start_time" ng-focus="open.event_end_time = true" ng-click="open.event_end_time = true" is-open="open.event_end_time" datetime-local="yyyy/MM/dd HH:mm" datetime-picker="yyyy/MM/dd HH:mm" timepicker-options="{'show-meridian':true}" required>
                  <i class="control-icon fa fa-calendar"></i>
                  <div class="messages" ng-messages="activitForm.event_end_time.$error" ng-if="activitForm.event_end_time.$touched && activitForm.event_end_time.$invalid">
                    <span ng-message="datetime"><i class="fa fa-close" uib-tooltip="{{'VALIDATE.EVENT_START_TIME_REQUIRED' | translate}}" tooltip-placement="right auto" ></i></span>
                    <span ng-message="min"><i class="fa fa-close" uib-tooltip="{{ 'VALIDATE.EVENT_END_TIME_MIN' | translate}}" tooltip-placement="right auto" ></i></span>
                    <span ng-message="required"><i class="fa fa-close" uib-tooltip="{{ 'VALIDATE.EVENT_END_TIME_REQUIRED' | translate}}" tooltip-placement="right auto"></i></span>
                  </div>
                  <div class="messages" ng-if="activitForm.event_end_time.$touched && activitForm.event_end_time.$valid">
                    <i class="fa fa-check"></i>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="inputPassword" class="col-xs-2 control-label" translate="ACTIVITY_FIELDS.REGISTRATION_TIME">REGISTRATION_TIME</label>
                <div class="col-xs-5 control-addon required" ng-class="{'has-error': activitForm.registration_start_time.$touched && activitForm.registration_start_time.$invalid,'has-success':activitForm.registration_start_time.$touched && activitForm.registration_start_time.$valid}">
                  <input type="text" class="form-control" name="registration_start_time" placeholder="{{'PLACEHOLDERS.START_TIME' | translate}}" ng-model="modules.registration_start_time" ng-max="modules.registration_end_time" max-date="modules.registration_end_time" ng-focus="open.registration_start_time = true" ng-click="open.registration_start_time = true" is-open="open.registration_start_time" datetime-local="yyyy/MM/dd HH:mm" datetime-picker="yyyy/MM/dd HH:mm" timepicker-options="{'show-meridian':true}" required>
                  <i class="control-icon fa fa-calendar"></i>
                  <div class="messages" ng-messages="activitForm.registration_start_time.$error" ng-if="activitForm.registration_start_time.$touched && activitForm.registration_start_time.$invalid">
                    <span ng-message="datetime"><i class="fa fa-close" uib-tooltip="{{'VALIDATE.EVENT_START_TIME_REQUIRED' | translate}}" tooltip-placement="right auto" ></i></span>
                    <span ng-message="max"><i class="fa fa-close" uib-tooltip="{{ 'VALIDATE.REGISTRATION_START_TIME_MAX' | translate}}" tooltip-placement="right auto" ></i></span>
                    <span ng-message="required"><i class="fa fa-close" uib-tooltip="{{ 'VALIDATE.REGISTRATION_START_TIME_REQUIRED' | translate}}" tooltip-placement="right auto"></i></span>
                  </div>
                  <div class="messages" ng-if="activitForm.registration_start_time.$touched && activitForm.registration_start_time.$valid">
                    <i class="fa fa-check"></i>
                  </div>
                </div>
                <div class="col-xs-5 control-addon" ng-class="{'has-error': activitForm.registration_end_time.$touched && activitForm.registration_end_time.$invalid,'has-success':activitForm.registration_end_time.$touched && activitForm.registration_end_time.$valid}">
                  <input type="text" class="form-control" name="registration_end_time" placeholder="{{'PLACEHOLDERS.END_TIME' | translate}}" ng-model="modules.registration_end_time" ng-min="modules.registration_start_time" min-date="modules.registration_start_time" ng-focus="open.registration_end_time = true" ng-click="open.registration_end_time = true" is-open="open.registration_end_time" datetime-local="yyyy/MM/dd HH:mm" datetime-picker="yyyy/MM/dd HH:mm" timepicker-options="{'show-meridian':true}" required>
                  <i class="control-icon fa fa-calendar"></i>
                  <div class="messages" ng-messages="activitForm.registration_end_time.$error" ng-if="activitForm.registration_end_time.$touched && activitForm.registration_end_time.$invalid">
                    <span ng-message="datetime"><i class="fa fa-close" uib-tooltip="{{'VALIDATE.EVENT_START_TIME_REQUIRED' | translate}}" tooltip-placement="right auto" ></i></span>
                    <span ng-message="min"><i class="fa fa-close" uib-tooltip="{{ 'VALIDATE.REGISTRATION_END_TIME_MIN' | translate}}" tooltip-placement="right auto" ></i></span>
                    <span ng-message="required"><i class="fa fa-close" uib-tooltip="{{ 'VALIDATE.REGISTRATION_END_TIME_REQUIRED' | translate}}" tooltip-placement="right auto"></i></span>
                  </div>
                  <div class="messages" ng-if="activitForm.registration_end_time.$touched && activitForm.registration_end_time.$valid">
                    <i class="fa fa-check"></i>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="inputPassword" class="col-xs-2 control-label" translate="ACTIVITY_FIELDS.JUDGE_TIME">JUDGE_TIME</label>
                <div class="col-xs-5 control-addon required" ng-class="{'has-error': activitForm.judge_start_time.$touched && activitForm.judge_start_time.$invalid,'has-success':activitForm.judge_start_time.$touched && activitForm.judge_start_time.$valid}">
                  <input type="text" class="form-control" name="judge_start_time" placeholder="{{'PLACEHOLDERS.START_TIME' | translate}}" ng-model="modules.judge_start_time" ng-max="modules.judge_end_time" max-date="modules.judge_end_time" ng-focus="open.judge_start_time = true" ng-click="open.judge_start_time = true" is-open="open.judge_start_time" datetime-local="yyyy/MM/dd HH:mm" datetime-picker="yyyy/MM/dd HH:mm" timepicker-options="{'show-meridian':true}" required>
                  <i class="control-icon fa fa-calendar"></i>
                  <div class="messages" ng-messages="activitForm.judge_start_time.$error" ng-if="activitForm.judge_start_time.$touched && activitForm.judge_start_time.$invalid">
                    <span ng-message="datetime"><i class="fa fa-close" uib-tooltip="{{'VALIDATE.EVENT_START_TIME_REQUIRED' | translate}}" tooltip-placement="right auto" ></i></span>
                    <span ng-message="max"><i class="fa fa-close" uib-tooltip="{{ 'VALIDATE.JUDGE_START_TIME_MAX' | translate}}" tooltip-placement="right auto" ></i></span>
                    <span ng-message="required"><i class="fa fa-close" uib-tooltip="{{ 'VALIDATE.JUDGE_START_TIME_REQUIRED' | translate}}" tooltip-placement="right auto"></i></span>
                  </div>
                  <div class="messages" ng-if="activitForm.judge_start_time.$touched && activitForm.judge_start_time.$valid">
                    <i class="fa fa-check"></i>
                  </div>
                </div>
                <div class="col-xs-5 control-addon" ng-class="{'has-error': activitForm.judge_end_time.$touched && activitForm.judge_end_time.$invalid,'has-success':activitForm.judge_end_time.$touched && activitForm.judge_end_time.$valid}">
                  <input type="text" class="form-control" name="judge_end_time" placeholder="{{'PLACEHOLDERS.END_TIME' | translate}}" ng-model="modules.judge_end_time" ng-min="modules.judge_start_time" min-date="modules.judge_start_time" ng-focus="open.judge_end_time = true" ng-click="open.judge_end_time = true" is-open="open.judge_end_time" datetime-local="yyyy/MM/dd HH:mm" datetime-picker="yyyy/MM/dd HH:mm" timepicker-options="{'show-meridian':true}" required>
                  <i class="control-icon fa fa-calendar"></i>
                  <div class="messages" ng-messages="activitForm.judge_end_time.$error" ng-if="activitForm.judge_end_time.$touched && activitForm.judge_end_time.$invalid">
                    <span ng-message="datetime"><i class="fa fa-close" uib-tooltip="{{'VALIDATE.EVENT_START_TIME_REQUIRED' | translate}}" tooltip-placement="right auto" ></i></span>
                    <span ng-message="min"><i class="fa fa-close" uib-tooltip="{{ 'VALIDATE.JUDGE_END_TIME_MIN' | translate}}" tooltip-placement="right auto" ></i></span>
                    <span ng-message="required"><i class="fa fa-close" uib-tooltip="{{ 'VALIDATE.JUDGE_END_TIME_REQUIRED' | translate}}" tooltip-placement="right auto"></i></span>
                  </div>
                  <div class="messages" ng-if="activitForm.judge_end_time.$touched && activitForm.judge_end_time.$valid">
                    <i class="fa fa-check"></i>
                  </div>
                </div>
              </div>
              <div class="form-group" ng-class="{'has-error': activitForm.ribbon.$touched && activitForm.ribbon.$invalid,'has-success':activitForm.ribbon.$touched && activitForm.ribbon.$valid}">
                <label for="inputPassword" class="col-xs-2 control-label" translate="ACTIVITY_FIELDS.RIBBON">RIBBON</label>
                <div class="col-xs-10">
                  <input type="text" name="ribbon" class="form-control" placeholder="" ng-model="modules.ribbon">
                </div>
              </div>
              <div class="form-group" ng-class="{'has-error': activitForm.max_enrollment.$touched && activitForm.max_enrollment.$invalid,'has-success': activitForm.max_enrollment.$touched && activitForm.max_enrollment.$valid}">
                <label for="inputPassword" class="col-xs-2 control-label" translate="ACTIVITY_FIELDS.MAX_ENROLLMENT">MAX_ENROLLMENT</label>
                <div class="col-xs-10 control-addon">
                  <input type="number" class="form-control" name="max_enrollment" placeholder="{{'PLACEHOLDERS.MAX_ENROLLMENT' | translate}}" min="0" ng-model="modules.config.max_enrollment" string-to-number ng-min="0" pattern="[0-9]+">
                  <i class="control-icon fa fa-user-plus"></i>
                  <div class="messages" ng-messages="activitForm.max_enrollment.$error" ng-if="activitForm.max_enrollment.$touched">
                    <span ng-message="min"><i class="fa fa-close" uib-tooltip="{{ 'VALIDATE.MAX_ENROLLMENT_MIN' | translate}}"  tooltip-placement="right auto"></i></span>
                    <span ng-message="pattern"><i class="fa fa-close" uib-tooltip="{{ 'VALIDATE.MAX_ENROLLMENT_PATTERN' | translate}}" tooltip-placement="right auto"></i></span>
                  </div>
                  <div class="messages" ng-if="activitForm.max_enrollment.$touched && activitForm.max_enrollment.$valid">
                    <i class="fa fa-check"></i>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="inputPassword" class="col-xs-2 control-label" translate="ACTIVITY_FIELDS.SHORT_DESCRIPTION">SHORT_DESCRIPTION</label>
                <div class="col-xs-10">
                  <textarea class="form-control" ng-model="modules.short_description"></textarea>
                </div>
              </div>
              <div class="form-group">
                  <div class="col-xs-offset-2 col-xs-10">
                    <button type="submit" class="btn btn-primary btn-long" ng-disabled="activitForm.$invalid || activityFormDisabled" translate="UPDATE">UPDATE</button>
                  </div>
              </div>
            </fieldset>
          </form>
        </div>
      </div>
    </uib-tab>
    <uib-tab heading="{{'EDIT_ACTIVITY_TABS.BANNER' | translate }}">
      <ng-form name="bannersForm">
        <fieldset class="banners clearfix">
          <div class="item" ng-repeat="banner in modules.banners track by $index">
            <img src="{{banner}}" static-image max-width="298" max-height="168">
            <button class="btn btn-sm btn-danger" ng-click="delBanner($index)"><i class="fa fa-times"></i>
              <ANY translate="DELETE">DELETE</ANY>
            </button>
          </div>
          <div class="item create" ng-click="showAddBannerDialog()">
            <h3><i class="fa fa-cloud-upload"></i> {{ 'ACTIVITY_FIELDS.ADD_BANNER' | translate}}</h3>
            <small translate="ACTIVITY_FIELDS.ADD_BANNER_TIP">ADD_BANNER_TIP</small>
          </div>
        </fieldset>
      </ng-form>
    </uib-tab>
    <uib-tab heading="{{'EDIT_ACTIVITY_TABS.DETAILS' | translate}}">
      <ng-form name="descriptionForm">
        <fieldset class="description-wrapper">
          <div>
            <textarea name="description" ckeditor ng-model="modules.description" add-plugins="save" height="500"></textarea>
          </div>
        </fieldset>
      </ng-form>
      <span class="btn btn-success fileinput-button">
        <span>{{data.descriptionUploadBtnHint}}</span>
        <input type="file" mutiple file-model="data.descriptionUploadFile" ng-click="selectDescriptionFile()">
      </span>
      <button type="button" class="btn btn-info" ng-show="data.descriptionUploadFile" ng-click="uploadDescriptionFile()">{{data.startUploadBtnHint}}</button>
      <span>{{data.descriptionUrl}}</span>
    </uib-tab>
    <uib-tab heading="{{'EDIT_ACTIVITY_TABS.PROVIDERS' | translate}}">
      <ng-form name="providerForm">
        <fieldset class="provider-wrapper text-center provider-group-default">
          <div class="form-group">
            <label class="provider provider-success windows">
              Microsoft Account
            </label>
            <label class="switchbox switchbox-success switchbox-inline">
              <input type="checkbox" ng-model="provider.windows" ng-change="providerChange(provider.windows,1)" speech>
              <span class="switchbox-handle" data-on="On" data-off="Off"><i></i></span>
            </label>
          </div>
          <div class="form-group">
            <label class="provider provider-success github">
              Github
            </label>
            <label class="switchbox switchbox-success switchbox-inline">
              <input type="checkbox" ng-model="provider.github" ng-change="providerChange(provider.github,2)" speech>
              <span class="switchbox-handle" data-on="On" data-off="Off"><i></i></span>
            </label>
          </div>
          <div class="form-group">
            <label class="provider provider-success qq">
              QQ
            </label>
            <label class="switchbox switchbox-success switchbox-inline">
              <input type="checkbox" ng-model="provider.qq" ng-change="providerChange(provider.qq,4)" speech>
              <span class="switchbox-handle" data-on="On" data-off="Off"><i></i></span>
            </label>
          </div>
          <div class="form-group">
            <label class="provider provider-success wechat">
              Wechat
            </label>
            <label class="switchbox switchbox-success switchbox-inline">
              <input type="checkbox" ng-model="provider.wechat" ng-change="providerChange(provider.wechat,64)" speech>
              <span class="switchbox-handle" data-on="On" data-off="Off"><i></i></span>
            </label>
          </div>
          <div class="form-group">
            <label class="provider provider-success weibo">
              Weibo
            </label>
            <label class="switchbox switchbox-success switchbox-inline">
              <input type="checkbox" ng-model="provider.weibo" ng-change="providerChange(provider.weibo,8)" speech>
              <span class="switchbox-handle" data-on="On" data-off="Off"><i></i></span>
            </label>
          </div>
          <div class="form-group">
            <label class="provider provider-success alauda">
              alauda 灵雀云
            </label>
            <label class="switchbox switchbox-success switchbox-inline">
              <input type="checkbox" ng-model="provider.alauda" ng-change="providerChange(provider.alauda,32)" speech>
              <span class="switchbox-handle" data-on="On" data-off="Off"><i></i></span>
            </label>
          </div>
          <!--<div class="form-group">
            <label class="provider provider-success gitcafe">
              Gitcafe
            </label>
            <label class="switchbox switchbox-success switchbox-inline">
              <input type="checkbox" ng-model="provider.gitcafe" ng-change="providerChange(provider.gitcafe,16)" speech>
              <span class="switchbox-handle" data-on="On" data-off="Off"><i></i></span>
            </label>
          </div>-->
        </fieldset>
      </ng-form>
    </uib-tab>
  </uib-tabset>
</div>

<script type="text/ng-template" id="addBannersModel.html">
  <div class="modal-header">
    <h3 class="modal-title">{{'ACTIVITY_FIELDS.ADD_BANNERS' | translate}}</h3>
  </div>
  <div class="modal-body">
    <form class="form-horizontal">
      <div class="form-group has-feedback">
        <label class="col-md-3 control-label">{{'ACTIVITY_FIELDS.PIC_ADDRESS' | translate}}</label>
        <div class="col-md-6">
          <input type="url" class="form-control"
                 ng-model="data.newBannerUrl"
                 placeholder="{{'ACTIVITY_FIELDS.PIC_ADDRESS_HINT' | translate}}"
                 data-bv-trigger="blur">
          <span class="help-block" style="margin-bottom:0px" ng-show="bannerFile!=''">{{uploadInputHint}}</span>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-info" ng-show="bannerFile!=''" ng-click="uploadBanner()">{{startUploadBtnHint}}</button>
    <span class="btn btn-success fileinput-button">
      <span>{{uploadBannerBtnHint}}</span>
      <input type="file" mutiple file-model="bannerFile" ng-click="selectFile()">
    </span>
    <button type="button" class="btn btn-default" ng-click="cancel()">取消</button>
    <button type="button" class="btn btn-primary" ng-click="addBanner();cancel()">提交</button>
  </div>
</script>
